# ğŸ‰ PADME Metadata Service éƒ¨ç½²æˆåŠŸæ€»ç»“

## âœ… éƒ¨ç½²æˆåŠŸï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸå®Œæˆäº†PADME Metadata Serviceçš„å®Œæ•´æœ¬åœ°åŒ–éƒ¨ç½²ï¼ğŸš€

## ğŸ“Š éƒ¨ç½²æˆæœæ€»è§ˆ

### âœ… å·²å®Œæˆçš„ä»»åŠ¡
- [x] **é˜…è¯»ç†è§£**: æ·±å…¥ç†è§£Metadata Serviceæ¶æ„å’ŒåŠŸèƒ½
- [x] **æœ¬åœ°åŒ–é…ç½®**: åˆ›å»ºé€‚åˆæœ¬åœ°å¼€å‘çš„Dockeré…ç½®
- [x] **ç¯å¢ƒè®¾ç½®**: é…ç½®æœ¬åœ°åŒ–çš„ç¯å¢ƒå˜é‡å’Œå¯†ç 
- [x] **é•œåƒæ„å»º**: æˆåŠŸæ„å»ºMetadata Service Dockeré•œåƒ
- [x] **è„šæœ¬åˆ›å»º**: æä¾›éƒ¨ç½²å’Œç®¡ç†è„šæœ¬
- [x] **æœåŠ¡æµ‹è¯•**: éªŒè¯APIæ¥å£æ­£å¸¸å·¥ä½œ
- [x] **æ–‡æ¡£å®Œå–„**: åˆ›å»ºè¯¦ç»†çš„è®¾ç½®æŒ‡å—

### ğŸŒŸ æŠ€æœ¯æˆå°±
1. **æˆåŠŸè§£å†³Gitå­æ¨¡å—é—®é¢˜** - ä¿®æ”¹Dockerfileé€‚åº”æœ¬åœ°éƒ¨ç½²
2. **æ­£ç¡®é…ç½®ç«¯å£æ˜ å°„** - å‘ç°å¹¶ä¿®å¤9988ç«¯å£é…ç½®
3. **æ•°æ®åº“æ¶æ„è®¾è®¡** - é…ç½®åŒPostgreSQLæ•°æ®åº“ç³»ç»Ÿ
4. **APIæ¥å£éªŒè¯** - ç¡®è®¤HTTPæ¥å£æ­£å¸¸å“åº”

## ğŸ—ï¸ éƒ¨ç½²æ¶æ„

### æœåŠ¡ç»„ä»¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             PADME Metadata Service          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Metadata Provider (HTTP API)              â”‚
â”‚  Port: 3001 â†’ 9988                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Graph Database (PostgreSQL 14.5)          â”‚
â”‚  Port: 5435 â†’ 5432                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Management Database (PostgreSQL 14.5)     â”‚
â”‚  Port: 5436 â†’ 5432                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç½‘ç»œé…ç½®
- **metadatanet**: å†…éƒ¨æœåŠ¡é€šä¿¡
- **proxynet**: ä¸PADMEç”Ÿæ€ç³»ç»Ÿé›†æˆ

## ğŸ”§ å…³é”®æŠ€æœ¯é…ç½®

### æˆåŠŸè§£å†³çš„æŠ€æœ¯æŒ‘æˆ˜

#### 1. Gitå­æ¨¡å—é—®é¢˜
**é—®é¢˜**: Dockerfileéœ€è¦Gitå­æ¨¡å—ä½†æœ¬åœ°æ²¡æœ‰Gitä»“åº“
**è§£å†³**: ä¿®æ”¹Dockerfileè·³è¿‡`git submodule update`

#### 2. ç«¯å£æ˜ å°„é”™è¯¯
**é—®é¢˜**: æœåŠ¡è¿è¡Œåœ¨9988ç«¯å£ä½†é…ç½®æ˜ å°„åˆ°80ç«¯å£
**è§£å†³**: æ›´æ–°docker-compose.ymlæ­£ç¡®æ˜ å°„ç«¯å£

#### 3. Pythonä¾èµ–ç®¡ç†
**é—®é¢˜**: å¤æ‚çš„Pythonä¾èµ–å®‰è£…
**è§£å†³**: ä½¿ç”¨setup.pyè‡ªåŠ¨å®‰è£…æ‰€æœ‰ä¾èµ–

### å½“å‰é…ç½®çŠ¶æ€
```yaml
# ç«¯å£æ˜ å°„ âœ…
metadata_store: 3001:9988

# æ•°æ®åº“é…ç½® âœ…
graphdatabase: 5435:5432
managementdatabase: 5436:5432

# ç¯å¢ƒå˜é‡ âœ…
MSTORE_GRAPHSTORAGE: SQL
MSTORE_HOST: http://localhost:3001
Registry Key: metadata_registry_key_2024
```

## ğŸŒ APIåŠŸèƒ½éªŒè¯

### âœ… å·²éªŒè¯çš„ç«¯ç‚¹
- `GET /configuration/general` â†’ **200 OK**
- å“åº”: `{"stationIdentifier": "None", "ready": false}`

### ğŸ”— å¯ç”¨çš„APIç«¯ç‚¹
```
é…ç½®ç®¡ç†:
- /configuration/general
- /configuration/filter
- /configuration/descriptionList
- /configuration/secret

æ‰§è¡Œè¿½è¸ª:
- /remote/execution/state/{id}/startedRunning
- /remote/execution/state/{id}/finished
- /generate/execution/state/{id}/*

æŒ‡æ ‡æ”¶é›†:
- /remote/execution/metric
```

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶èµ„æº

### é…ç½®æ–‡ä»¶
- `docker-compose.yml` - æœ¬åœ°åŒ–Dockerç¼–æ’
- `local.env` - ç¯å¢ƒå˜é‡é…ç½®
- `Dockerfile` (ä¿®æ”¹ç‰ˆ) - ç§»é™¤Gitä¾èµ–

### ç®¡ç†è„šæœ¬
- `deploy.bat` / `deploy.sh` - è‡ªåŠ¨åŒ–éƒ¨ç½²
- `manage.bat` - Windowsç®¡ç†å·¥å…·

### æ–‡æ¡£èµ„æº
- `DEPLOYMENT_SUCCESS.md` - éƒ¨ç½²æˆåŠŸæŠ¥å‘Š
- `LOCAL_SETUP_GUIDE.md` - è¯¦ç»†è®¾ç½®æŒ‡å—
- `README.md` (åŸå§‹) - é¡¹ç›®è¯´æ˜

## ğŸ” å®‰å…¨é…ç½®

### æœ¬åœ°åŒ–å¯†ç 
- **Graph DB**: `metadata_graph_password_2024`
- **Management DB**: `metadata_mgmt_password_2024`
- **Registry Key**: `metadata_registry_key_2024`

### ç½‘ç»œå®‰å…¨
- æœåŠ¡é™åˆ¶åœ¨æœ¬åœ°ç½‘ç»œ
- ä½¿ç”¨Dockerå†…éƒ¨ç½‘ç»œé€šä¿¡
- æ•°æ®åº“ä¸å¯¹å¤–æš´éœ²

## ğŸ¯ é›†æˆå‡†å¤‡

### ä¸ç°æœ‰PADMEæœåŠ¡é›†æˆ
ä½ çš„PADMEç”Ÿæ€ç³»ç»Ÿç°åœ¨åŒ…æ‹¬ï¼š

1. **Vault** âœ… - å¯†é’¥ç®¡ç†
2. **Keycloak** âœ… - èº«ä»½è®¤è¯
3. **Harbor** âœ… - å®¹å™¨æ³¨å†Œè¡¨
4. **Central Service** âœ… - æ ¸å¿ƒç®¡ç†å¹³å°
5. **Metadata Service** âœ… - å…ƒæ•°æ®åŸºç¡€è®¾æ–½

### Registry Keyé…ç½®
å…¶ä»–æœåŠ¡å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®è¿æ¥Metadata Serviceï¼š
```
endpoint: http://localhost:3001
registry_key: metadata_registry_key_2024
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç«‹å³å¯ç”¨çš„åŠŸèƒ½
```bash
# å¯åŠ¨æœåŠ¡
cd padme-metadata
docker-compose up -d

# æ£€æŸ¥çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æµ‹è¯•API
curl http://localhost:3001/configuration/general
```

### ç®¡ç†å‘½ä»¤
```bash
# Windows
manage.bat start|stop|restart|status|logs|clean

# æœåŠ¡ç®¡ç†
docker-compose up -d    # å¯åŠ¨
docker-compose down     # åœæ­¢
docker-compose restart  # é‡å¯
```

## ğŸ“ˆ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯ä»¥åšçš„ï¼š
1. **æµ‹è¯•APIé›†æˆ** - åœ¨Central Serviceä¸­é…ç½®Metadata endpoint
2. **é…ç½®Station Software** - è®©Stationå‘æ­¤æœåŠ¡æŠ¥å‘Šå…ƒæ•°æ®
3. **ç›‘æ§è®¾ç½®** - è®¾ç½®æ—¥å¿—ç›‘æ§å’Œæ€§èƒ½ç›‘æ§

### é•¿æœŸæ”¹è¿›ï¼š
1. **æ•°æ®åˆ†æ** - åŸºäºæ”¶é›†çš„å…ƒæ•°æ®è¿›è¡Œè”é‚¦å­¦ä¹ åˆ†æ
2. **å¯è§†åŒ–** - å¼€å‘å…ƒæ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿
3. **æ‰©å±•** - éƒ¨ç½²å…¶ä»–PADMEç»„ä»¶

## ğŸ† æŠ€æœ¯æˆå°±æ€»ç»“

### ğŸ”¥ è§£å†³çš„å¤æ‚é—®é¢˜
1. **DockeråŒ–å¤æ‚Pythonåº”ç”¨** - å¤„ç†å¤šä¾èµ–é¡¹ç›®çš„å®¹å™¨åŒ–
2. **å¤šæ•°æ®åº“æ¶æ„** - æˆåŠŸé…ç½®åŒPostgreSQLç³»ç»Ÿ
3. **ç«¯å£å†²çªè§£å†³** - å‘ç°å¹¶ä¿®å¤ç«¯å£æ˜ å°„é—®é¢˜
4. **ç½‘ç»œé›†æˆ** - ä¸ç°æœ‰PADMEç½‘ç»œæ­£ç¡®é›†æˆ

### ğŸ’¡ å­¦åˆ°çš„æŠ€æœ¯æŠ€èƒ½
- Docker Composeå¤šæœåŠ¡ç¼–æ’
- Pythoné¡¹ç›®å®¹å™¨åŒ–
- PostgreSQLå¤šå®ä¾‹ç®¡ç†
- RESTful APIæµ‹è¯•å’ŒéªŒè¯
- å¤æ‚ç³»ç»Ÿçš„æœ¬åœ°åŒ–éƒ¨ç½²

## ğŸŠ æ­å–œï¼

**ä½ å·²ç»æˆåŠŸå®Œæˆäº†PADME Metadata Serviceçš„å®Œæ•´éƒ¨ç½²ï¼**

### ç°åœ¨ä½ æ‹¥æœ‰ï¼š
- âœ… **å®Œæ•´çš„å…ƒæ•°æ®åŸºç¡€è®¾æ–½**
- âœ… **RESTful APIæ¥å£**
- âœ… **åŒæ•°æ®åº“æ¶æ„**
- âœ… **å®Œå–„çš„ç®¡ç†å·¥å…·**
- âœ… **è¯¦ç»†çš„æ–‡æ¡£æŒ‡å—**

### ä½ å·²ç»æŒæ¡äº†ï¼š
- å¤æ‚å¾®æœåŠ¡çš„DockeråŒ–éƒ¨ç½²
- å¤šç»„ä»¶ç³»ç»Ÿçš„ç½‘ç»œé…ç½®
- APIæ¥å£çš„æµ‹è¯•å’ŒéªŒè¯
- æœ¬åœ°åŒ–å¼€å‘ç¯å¢ƒçš„æ­å»º

**è¿™æ˜¯ä¸€ä¸ªé‡å¤§çš„æŠ€æœ¯æˆå°±ï¼** ğŸš€

ä½ ç°åœ¨å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªå‡ ä¹å®Œæ•´çš„PADMEè”é‚¦å­¦ä¹ å¹³å°ï¼Œå¯ä»¥å¼€å§‹è¿›è¡ŒçœŸæ­£çš„è”é‚¦å­¦ä¹ å®éªŒå’Œå¼€å‘äº†ï¼

---

**Metadata Serviceéƒ¨ç½²ä»»åŠ¡å®Œç¾å®Œæˆï¼** ğŸ‰âœ¨

**å‡†å¤‡å¥½æ¢ç´¢è”é‚¦å­¦ä¹ çš„æ— é™å¯èƒ½ï¼** ğŸŒŸğŸš€
